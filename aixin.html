<!DOCTYPE html>
<html lang='zh-CN'>
<head>
    <meta charset='UTF-8'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0'>
    <title>ç®€å•ç‚¹é¤å™¨</title>
    <style>
        * {
            box-sizing: border-box;
            font-family: 'SimHei', Arial, sans-serif;
        }
        body {
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
            color: #333;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 30px;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }
        .menu-section {
            margin-bottom: 30px;
        }
        h2 {
            color: #2980b9;
            border-left: 5px solid #3498db;
            padding-left: 10px;
        }
        .dish-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            border: 1px solid #ddd;
            margin-bottom: 10px;
            border-radius: 8px;
            transition: all 0.3s;
        }
        .dish-item:hover {
            background-color: #f8f9fa;
            border-color: #3498db;
        }
        .dish-info {
            flex-grow: 1;
        }
        .dish-name {
            font-weight: bold;
            font-size: 18px;
            margin-bottom: 5px;
        }
        .dish-price {
            color: #e74c3c;
            font-size: 16px;
        }
        .dish-controls {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        .quantity-input {
            width: 60px;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            text-align: center;
        }
        .checkbox-label {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
        }
        .checkbox-label input {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }
        .total-section {
            background-color: #ecf0f1;
            padding: 20px;
            border-radius: 8px;
            margin-top: 30px;
            text-align: center;
        }
        .total-amount {
            font-size: 28px;
            color: #e74c3c;
            font-weight: bold;
            margin: 10px 0;
        }
        .button-group {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
        }
        button {
            padding: 12px 30px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
        }
        #calculateBtn {
            background-color: #3498db;
            color: white;
        }
        #calculateBtn:hover {
            background-color: #2980b9;
        }
        #submitBtn {
            background-color: #2ecc71;
            color: white;
        }
        #submitBtn:hover {
            background-color: #27ae60;
        }
        #resetBtn {
            background-color: #e74c3c;
            color: white;
        }
        #resetBtn:hover {
            background-color: #c0392b;
        }
        .message {
            text-align: center;
            margin-top: 20px;
            padding: 10px;
            border-radius: 4px;
            display: none;
        }
        .success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        @media (max-width: 600px) {
            .container {
                padding: 15px;
            }
            .dish-item {
                flex-direction: column;
                align-items: flex-start;
            }
            .dish-controls {
                width: 100%;
                justify-content: space-between;
                margin-top: 10px;
            }
            .button-group {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class='container'>
        <h1>ğŸ½ï¸ ç®€å•ç‚¹é¤å™¨</h1>
        
        <div class='menu-section'>
            <h2>ğŸ” ä¸»é¤</h2>
            <div class='dish-item' data-price='25'>
                <div class='dish-info'>
                    <div class='dish-name'>ç»å…¸æ±‰å ¡</div>
                    <div class='dish-price'>ä»·æ ¼: 25å…ƒ</div>
                </div>
                <div class='dish-controls'>
                    <label class='checkbox-label'>
                        <input type='checkbox' class='dish-checkbox' data-name='ç»å…¸æ±‰å ¡'>
                        é€‰æ‹©
                    </label>
                    <input type='number' class='quantity-input' min='0' value='0' placeholder='æ•°é‡'>
                </div>
            </div>
            
            <div class='dish-item' data-price='35'>
                <div class='dish-info'>
                    <div class='dish-name'>ç¾å‘³æŠ«è¨</div>
                    <div class='dish-price'>ä»·æ ¼: 35å…ƒ</div>
                </div>
                <div class='dish-controls'>
                    <label class='checkbox-label'>
                        <input type='checkbox' class='dish-checkbox' data-name='ç¾å‘³æŠ«è¨'>
                        é€‰æ‹©
                    </label>
                    <input type='number' class='quantity-input' min='0' value='0' placeholder='æ•°é‡'>
                </div>
            </div>
        </div>
        
        <div class='menu-section'>
            <h2>ğŸŸ å°é£Ÿ</h2>
            <div class='dish-item' data-price='12'>
                <div class='dish-info'>
                    <div class='dish-name'>é¦™è„†è–¯æ¡</div>
                    <div class='dish-price'>ä»·æ ¼: 12å…ƒ</div>
                </div>
                <div class='dish-controls'>
                    <label class='checkbox-label'>
                        <input type='checkbox' class='dish-checkbox' data-name='é¦™è„†è–¯æ¡'>
                        é€‰æ‹©
                    </label>
                    <input type='number' class='quantity-input' min='0' value='0' placeholder='æ•°é‡'>
                </div>
            </div>
            
            <div class='dish-item' data-price='15'>
                <div class='dish-info'>
                    <div class='dish-name'>é¸¡ç±³èŠ±</div>
                    <div class='dish-price'>ä»·æ ¼: 15å…ƒ</div>
                </div>
                <div class='dish-controls'>
                    <label class='checkbox-label'>
                        <input type='checkbox' class='dish-checkbox' data-name='é¸¡ç±³èŠ±'>
                        é€‰æ‹©
                    </label>
                    <input type='number' class='quantity-input' min='0' value='0' placeholder='æ•°é‡'>
                </div>
            </div>
        </div>
        
        <div class='menu-section'>
            <h2>ğŸ¥¤ é¥®æ–™</h2>
            <div class='dish-item' data-price='8'>
                <div class='dish-info'>
                    <div class='dish-name'>å¯ä¹</div>
                    <div class='dish-price'>ä»·æ ¼: 8å…ƒ</div>
                </div>
                <div class='dish-controls'>
                    <label class='checkbox-label'>
                        <input type='checkbox' class='dish-checkbox' data-name='å¯ä¹'>
                        é€‰æ‹©
                    </label>
                    <input type='number' class='quantity-input' min='0' value='0' placeholder='æ•°é‡'>
                </div>
            </div>
            
            <div class='dish-item' data-price='8'>
                <div class='dish-info'>
                    <div class='dish-name'>é›ªç¢§</div>
                    <div class='dish-price'>ä»·æ ¼: 8å…ƒ</div>
                </div>
                <div class='dish-controls'>
                    <label class='checkbox-label'>
                        <input type='checkbox' class='dish-checkbox' data-name='é›ªç¢§'>
                        é€‰æ‹©
                    </label>
                    <input type='number' class='quantity-input' min='0' value='0' placeholder='æ•°é‡'>
                </div>
            </div>
        </div>
        
        <div class='total-section'>
            <h2>è®¢å•æ€»è®¡</h2>
            <div class='total-amount' id='totalAmount'>0å…ƒ</div>
            <p>å·²é€‰æ‹© <span id='selectedCount'>0</span> ç§èœå“ï¼Œå…±è®¡ <span id='totalQuantity'>0</span> ä»½</p>
        </div>
        
        <div class='button-group'>
            <button id='calculateBtn'>è®¡ç®—æ€»ä»·</button>
            <button id='submitBtn'>æäº¤è®¢å•</button>
            <button id='resetBtn'>é‡ç½®è®¢å•</button>
        </div>
        
        <div id='message' class='message'></div>
    </div>

    <script>
        function calculateTotalPrice() {
            const checkboxes = document.querySelectorAll('.dish-checkbox:checked');
            let total = 0;
            let selectedCount = 0;
            let totalQuantity = 0;
            
            checkboxes.forEach(checkbox => {
                const dishItem = checkbox.closest('.dish-item');
                const price = parseFloat(dishItem.dataset.price);
                const quantityInput = dishItem.querySelector('.quantity-input');
                const quantity = parseInt(quantityInput.value) || 0;
                
                if (quantity > 0) {
                    total += price * quantity;
                    selectedCount++;
                    totalQuantity += quantity;
                }
            });
            
            document.getElementById('totalAmount').textContent = total + 'å…ƒ';
            document.getElementById('selectedCount').textContent = selectedCount;
            document.getElementById('totalQuantity').textContent = totalQuantity;
            
            return {
                total: total,
                selectedCount: selectedCount,
                totalQuantity: totalQuantity,
                message: `è®¡ç®—å®Œæˆï¼šæ€»ä»· ${total}å…ƒï¼Œå…± ${selectedCount} ç§èœå“ï¼Œ${totalQuantity} ä»½`
            };
        }
        
        function showMessage(text, isSuccess = true) {
            const messageDiv = document.getElementById('message');
            messageDiv.textContent = text;
            messageDiv.className = 'message ' + (isSuccess ? 'success' : '');
            messageDiv.style.display = 'block';
            
            setTimeout(() => {
                messageDiv.style.display = 'none';
            }, 3000);
        }
        
        function resetOrder() {
            document.querySelectorAll('.dish-checkbox').forEach(cb => {
                cb.checked = false;
            });
            document.querySelectorAll('.quantity-input').forEach(input => {
                input.value = '0';
            });
            
            document.getElementById('totalAmount').textContent = '0å…ƒ';
            document.getElementById('selectedCount').textContent = '0';
            document.getElementById('totalQuantity').textContent = '0';
            
            showMessage('è®¢å•å·²é‡ç½®', true);
            return 'è®¢å•å·²æˆåŠŸé‡ç½®ï¼Œæ‰€æœ‰é€‰æ‹©å·²æ¸…ç©ºã€‚';
        }
        
        function submitOrder() {
            const result = calculateTotalPrice();
            
            if (result.selectedCount === 0 || result.totalQuantity === 0) {
                showMessage('è¯·è‡³å°‘é€‰æ‹©ä¸€ä»½èœå“ï¼', false);
                return 'æäº¤å¤±è´¥ï¼šæœªé€‰æ‹©ä»»ä½•èœå“æˆ–æ•°é‡ä¸º0ã€‚';
            }
            
            const orderDetails = [];
            document.querySelectorAll('.dish-checkbox:checked').forEach(checkbox => {
                const dishItem = checkbox.closest('.dish-item');
                const dishName = checkbox.dataset.name;
                const price = parseFloat(dishItem.dataset.price);
                const quantity = parseInt(dishItem.querySelector('.quantity-input').value) || 0;
                
                if (quantity > 0) {
                    orderDetails.push(`${dishName} Ã— ${quantity} = ${price * quantity}å…ƒ`);
                }
            });
            
            const orderSummary = `è®¢å•æäº¤æˆåŠŸï¼
æ€»è®¡ï¼š${result.total}å…ƒ
èœå“æ•°é‡ï¼š${result.selectedCount}ç§
æ€»ä»½æ•°ï¼š${result.totalQuantity}ä»½
è¯¦æƒ…ï¼š
${orderDetails.join('\n')}`;
            
            showMessage('è®¢å•æäº¤æˆåŠŸï¼æ€»è®¡ï¼š' + result.total + 'å…ƒ', true);
            console.log(orderSummary);
            
            return orderSummary;
        }
        
        function main() {
            // åˆå§‹åŒ–äº‹ä»¶ç›‘å¬å™¨
            document.getElementById('calculateBtn').addEventListener('click', function() {
                const result = calculateTotalPrice();
                showMessage(result.message, true);
                return result.message;
            });
            
            document.getElementById('submitBtn').addEventListener('click', function() {
                const result = submitOrder();
                return result;
            });
            
            document.getElementById('resetBtn').addEventListener('click', function() {
                const result = resetOrder();
                return result;
            });
            
            // å¤é€‰æ¡†å’Œæ•°é‡è¾“å…¥æ¡†çš„è”åŠ¨
            document.querySelectorAll('.dish-checkbox').forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    const quantityInput = this.closest('.dish-item').querySelector('.quantity-input');
                    if (this.checked) {
                        quantityInput.value = '1';
                    } else {
                        quantityInput.value = '0';
                    }
                    calculateTotalPrice();
                });
            });
            
            document.querySelectorAll('.quantity-input').forEach(input => {
                input.addEventListener('change', function() {
                    const checkbox = this.closest('.dish-item').querySelector('.dish-checkbox');
                    const value = parseInt(this.value) || 0;
                    
                    if (value > 0) {
                        checkbox.checked = true;
                    } else {
                        checkbox.checked = false;
                    }
                    
                    calculateTotalPrice();
                });
            });
            
            // åˆå§‹è®¡ç®—
            calculateTotalPrice();
            
            return 'ç®€å•ç‚¹é¤å™¨åˆå§‹åŒ–å®Œæˆï¼ŒåŒ…å«æ±‰å ¡ã€æŠ«è¨ã€è–¯æ¡ã€é¥®æ–™ç­‰èœå“ï¼Œå…·å¤‡é€‰æ‹©ã€è®¡ç®—æ€»ä»·ã€æäº¤å’Œé‡ç½®åŠŸèƒ½ã€‚';
        }
        
        // é¡µé¢åŠ è½½å®Œæˆåæ‰§è¡Œ
        document.addEventListener('DOMContentLoaded', main);
    </script>
</body>
</html>
